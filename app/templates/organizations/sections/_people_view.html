{# Organization People Section - View Mode #}
{% if people_by_type %}
{% set rel_type_labels = {
    'current_employee': 'Current Employees',
    'former_employee': 'Former Employees',
    'board_member': 'Board Members',
    'advisor': 'Advisors',
    'investor': 'Investors',
    'founder': 'Founders',
    'key_person': 'Key People',
    'connection': 'Connections',
    'contact_at': 'Contacts',
    'affiliated_with': 'Affiliated',
    'peer_history': 'Peer History'
} %}
{% set rel_type_colors = {
    'current_employee': 'bg-emerald-100 text-emerald-800',
    'former_employee': 'bg-slate-100 text-slate-700',
    'board_member': 'bg-indigo-100 text-indigo-800',
    'advisor': 'bg-amber-100 text-amber-800',
    'investor': 'bg-green-100 text-green-800',
    'founder': 'bg-purple-100 text-purple-800',
    'key_person': 'bg-rose-100 text-rose-800',
    'connection': 'bg-cyan-100 text-cyan-800',
    'contact_at': 'bg-blue-100 text-blue-800',
    'affiliated_with': 'bg-blue-100 text-blue-800',
    'peer_history': 'bg-violet-100 text-violet-800'
} %}
{% for rel_type, persons in people_by_type.items() %}
<div class="mb-4 last:mb-0">
    <div class="flex items-center justify-between mb-2">
        <h3 class="text-sm font-medium text-blackbook-700">
            {{ rel_type_labels.get(rel_type, rel_type | replace('_', ' ') | title) }}
        </h3>
        <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium {{ rel_type_colors.get(rel_type, 'bg-gray-100 text-gray-800') }}">
            {{ persons|length }}
        </span>
    </div>
    <div class="space-y-2">
        {% for op in persons %}
        <div class="flex items-center justify-between py-2 border-b border-blackbook-100 last:border-0">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 rounded-full bg-blackbook-100 flex items-center justify-center">
                    <span class="text-blackbook-600 font-medium text-xs">
                        {% if op.person %}
                            {{ op.person.full_name[:2] | upper }}
                        {% elif op.person_name %}
                            {{ op.person_name[:2] | upper }}
                        {% else %}
                            ?
                        {% endif %}
                    </span>
                </div>
                <div>
                    {% if op.person %}
                    <a href="/people/{{ op.person.id }}" class="text-blackbook-900 font-medium hover:text-blackbook-600 text-sm">
                        {{ op.person.full_name }}
                    </a>
                    {% elif op.person_name %}
                    <span class="text-blackbook-700 text-sm">{{ op.person_name }}</span>
                    <span class="text-xs text-blackbook-400 ml-1">(not linked)</span>
                    {% else %}
                    <span class="text-blackbook-500 italic text-sm">Unknown</span>
                    {% endif %}
                    {% if op.role %}
                    <p class="text-xs text-blackbook-500">{{ op.role }}</p>
                    {% endif %}
                </div>
            </div>
            <div class="flex items-center gap-2">
                {% if op.is_current %}
                <span class="inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800">
                    Current
                </span>
                {% else %}
                <span class="inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-600">
                    Past
                </span>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endfor %}
{% else %}
<p class="text-blackbook-400 italic">No people affiliated with this organization</p>
{% endif %}
