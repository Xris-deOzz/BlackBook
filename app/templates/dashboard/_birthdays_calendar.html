<div>
    <!-- Calendar Header with Navigation -->
    <div class="flex items-center justify-between mb-4">
        <button hx-get="/dashboard/birthdays-widget?view=calendar&month={{ prev_month }}&year={{ prev_year }}"
                hx-target="#birthday-reminders"
                hx-swap="innerHTML"
                class="p-1.5 rounded-md hover:bg-blackbook-700 transition-colors">
            <svg class="w-5 h-5 text-blackbook-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
            </svg>
        </button>
        <h3 class="text-lg font-semibold text-blackbook-100">{{ month_name }} {{ year }}</h3>
        <button hx-get="/dashboard/birthdays-widget?view=calendar&month={{ next_month }}&year={{ next_year }}"
                hx-target="#birthday-reminders"
                hx-swap="innerHTML"
                class="p-1.5 rounded-md hover:bg-blackbook-700 transition-colors">
            <svg class="w-5 h-5 text-blackbook-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
        </button>
    </div>

    <!-- Calendar Grid -->
    <div class="border border-blackbook-600 rounded-lg overflow-hidden">
        <!-- Day Headers -->
        <div class="grid grid-cols-7 bg-blackbook-700 border-b border-blackbook-600">
            {% for day_name in ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'] %}
            <div class="py-2 text-center text-xs font-semibold text-blackbook-300">{{ day_name }}</div>
            {% endfor %}
        </div>

        <!-- Calendar Days -->
        {% for week in month_days %}
        <div class="grid grid-cols-7 divide-x divide-blackbook-700 {% if not loop.last %}border-b border-blackbook-700{% endif %}">
            {% for day in week %}
            <div class="min-h-[80px] p-1 {% if day == 0 %}bg-blackbook-800/50{% elif day == today.day and month == today.month and year == today.year %}bg-blue-900/30{% else %}bg-blackbook-800{% endif %}">
                {% if day != 0 %}
                <div class="flex flex-col h-full">
                    <!-- Day Number -->
                    <span class="text-xs font-medium {% if day == today.day and month == today.month and year == today.year %}text-blue-400{% else %}text-blackbook-400{% endif %}">
                        {{ day }}
                    </span>

                    <!-- Birthdays for this day -->
                    {% if day in birthdays_by_day %}
                    <div class="mt-1 space-y-0.5 overflow-y-auto flex-1">
                        {% for birthday in birthdays_by_day[day] %}
                        <a href="/people/{{ birthday.person.id }}"
                           class="block px-1 py-0.5 text-xs rounded bg-pink-900/50 text-pink-200 hover:bg-pink-800/70 truncate"
                           title="{{ birthday.person.first_name }} {{ birthday.person.last_name or '' }} - Turning {{ birthday.age }}">
                            <span class="inline-block w-1.5 h-1.5 rounded-full bg-pink-400 mr-0.5"></span>
                            {{ birthday.person.first_name }}
                        </a>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        {% endfor %}
    </div>

    <!-- Legend -->
    <div class="mt-3 flex items-center gap-4 text-xs text-blackbook-400">
        <div class="flex items-center gap-1">
            <span class="inline-block w-3 h-3 rounded bg-pink-900/50 border border-pink-700"></span>
            <span>Birthday</span>
        </div>
        <div class="flex items-center gap-1">
            <span class="inline-block w-3 h-3 rounded bg-blue-900/30 border border-blue-700"></span>
            <span>Today</span>
        </div>
    </div>
</div>
